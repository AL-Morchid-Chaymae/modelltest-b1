<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Modelltest B1 ‚Äì Deutsch</title>
  <link rel="stylesheet" href="style.css">
</head>
<div id="fixed-timer">
  ‚è≥ <span id="timerEl">60:00</span>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<body>
<script>
const name = localStorage.getItem("candidateName");
if(!name){
  window.location.href = "start.html"; // redirection si pas de nom
}
</script>

  <!-- PAGE DU TEST (masqu√©e au d√©part) -->
  <div id="test-content">
    <header class="site-header">
      <div class="wrap header-content">
        <img src="images/logo.png" alt="Deutschland Logo" class="logo-small">
        <div>
          <h1>Willkommen, <span id="candidateName"></span>!</h1>
          <p class="lead">Dieser Test enth√§lt die Teile Lesen, H√∂ren und Schreiben. Viel Erfolg!</p>
        </div>
      </div>
    </header>
    <script>
    document.getElementById("candidateName").textContent = localStorage.getItem("candidateName");
    </script>


    <main class="wrap">
      <!-- LESEN -->
      <section id="lesen" class="card">
        <h2>üìñ Lesen</h2>

        <!-- Teil 1: Langer Text + 6 Fragen -->
        <article class="teil">
          <h3>Teil 1 ‚Äî Leseverstehen (Text & 6 Fragen)</h3>
          <div class="text-box">
            <p>
              <strong>Text:</strong><br>
              Herr M√ºller arbeitet seit f√ºnf Jahren in einer Firma in der Innenstadt. Jeden Morgen f√§hrt er mit dem Fahrrad zur Arbeit, weil er so schneller ist als mit dem Auto. Mittags geht er h√§ufig in ein kleines Caf√© gegen√ºber dem B√ºro, wo er sich mit Kollegen trifft. Am Wochenende f√§hrt er manchmal mit dem Zug in die Berge, um zu wandern; gelegentlich besucht er auch seine Schwester in einer Nachbarstadt. Seine Hobbys sind G√§rtnern, Lesen und Kochen. Wenn das Wetter schlecht ist, bleibt er lieber zu Hause und liest ein Buch oder schaut einen Film. Im Sommer organisiert er oft kleine Ausfl√ºge mit Freunden, bei denen er auch gerne fotografiert. Letztes Jahr hat er an einem Kochkurs teilgenommen und dort neue Rezepte gelernt.
            </p>
          </div>

          <div class="fragen">
            <p><strong>Frage 1:</strong> Wie kommt Herr M√ºller normalerweise zur Arbeit?</p>
            <label><input type="radio" name="lesen_q1" value="fahrrad"> Mit dem Fahrrad</label><br>
            <label><input type="radio" name="lesen_q1" value="auto"> Mit dem Auto</label><br>
            <label><input type="radio" name="lesen_q1" value="zug"> Mit dem Zug</label>

            <p><strong>Frage 2:</strong> Was macht er mittags oft?</p>
            <label><input type="radio" name="lesen_q2" value="cafe"> Er geht ins Caf√©</label><br>
            <label><input type="radio" name="lesen_q2" value="sport"> Er macht Sport</label><br>
            <label><input type="radio" name="lesen_q2" value="arbeiten"> Er arbeitet l√§nger</label>

            <p><strong>Frage 3:</strong> Wohin f√§hrt er manchmal am Wochenende?</p>
            <label><input type="radio" name="lesen_q3" value="berge"> In die Berge</label><br>
            <label><input type="radio" name="lesen_q3" value="meer"> Ans Meer</label><br>
            <label><input type="radio" name="lesen_q3" value="stadt"> In die Stadt</label>

            <p><strong>Frage 4 (Kurzantwort):</strong> Nenne zwei Hobbys von Herrn M√ºller.</p>
            <input type="text" id="lesen_q4" placeholder="z. B. G√§rtnern, Lesen">

            <p><strong>Frage 5 (Wahr/Falsch):</strong> Herr M√ºller besucht seine Schwester in der gleichen Stadt.</p>
            <label><input type="radio" name="lesen_q5" value="wahr"> Wahr</label>
            <label><input type="radio" name="lesen_q5" value="falsch"> Falsch</label>

            <p><strong>Frage 6 (L√ºckentext, ein Wort):</strong> ‚ÄûWenn das Wetter schlecht ist, bleibt er lieber zu <input id="lesen_q6" type="text" placeholder="ein Wort">.‚Äú</p>
          </div>

          <p class="small">Hinweis: Beim Lesen-Teil werden die Antworten intern gespeichert ‚Äî es erscheint kein Ergebnis.</p>
          <button class="btn" id="lesen-save">Antworten speichern (Lesen)</button>
        </article>

        <!-- Teil 2: Brief erg√§nzen (Pr√§positionen & Wortschatz mit choix) -->
        <article class="teil">
          <h3>Teil 2 ‚Äî Erg√§nzen Sie die W√∂rter im Brief (Pr√§positionen & Wortschatz)</h3>
          <p><strong>Aufgabe:</strong> W√§hlen Sie f√ºr jede L√ºcke die passende Option (A‚ÄìD). Jede L√ºcke hat vier Auswahlm√∂glichkeiten.</p>

          <div class="brief-box">
            <p>
              Liebe Claudia,<br>
              vielen Dank f√ºr deine Einladung zu der Feier <em>______</em> Samstagabend. Ich freue mich sehr, dass du mich <em>______</em> diese besondere Nacht eingeladen hast. Leider kann ich nicht kommen, weil ich <em>______</em> meinem Bruder helfen muss. Er wohnt gerade <em>______</em> einer neuen Wohnung und braucht Unterst√ºtzung <em>______</em> dem Umzug. Ich hoffe, dass wir uns bald wiedersehen ‚Äî vielleicht <em>______</em> dem n√§chsten Wochenende? Bitte sag mir, ob ich etwas mitbringen soll. Viele Gr√º√üe,<br>
              Maria
            </p>
          </div>

          <div class="choices">
            <p>L√ºcke 1:
              <select id="brief_l1">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) an</option>
                <option value="B">B) am</option>
                <option value="C">C) im</option>
                <option value="D">D) bei</option>
              </select>
            </p>

            <p>L√ºcke 2:
              <select id="brief_l2">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) zu</option>
                <option value="B">B) f√ºr</option>
                <option value="C">C) mit</option>
                <option value="D">D) auf</option>
              </select>
            </p>

            <p>L√ºcke 3:
              <select id="brief_l3">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) am</option>
                <option value="B">B) im</option>
                <option value="C">C) beim</option>
                <option value="D">D) in</option>
              </select>
            </p>

            <p>L√ºcke 4:
              <select id="brief_l4">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) in</option>
                <option value="B">B) an</option>
                <option value="C">C) bei</option>
                <option value="D">D) zu</option>
              </select>
            </p>

            <p>L√ºcke 5:
              <select id="brief_l5">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) √ºber</option>
                <option value="B">B) f√ºr</option>
                <option value="C">C) beim</option>
                <option value="D">D) mit</option>
              </select>
            </p>

            <p>L√ºcke 6:
              <select id="brief_l6">
                <option value="">-- w√§hlen --</option>
                <option value="A">A) an</option>
                <option value="B">B) in</option>
                <option value="C">C) bis</option>
                <option value="D">D) am</option>
              </select>
            </p>
          </div>

          <p class="small">Die Auswahl enth√§lt typische Pr√§positionen und Strukturen auf B1-Niveau.</p>
          <button class="btn" id="brief-save">Antworten speichern (Brief)</button>
        </article>

        <!-- Teil 3: Grammatik & Situationsaufgaben -->
        <article class="teil">
          <h3>Teil 3 ‚Äî Grammatik & Situationsaufgaben</h3>
          <p>Lesen Sie die drei kurzen Situationen und w√§hlen Sie jeweils die richtige Option.</p>

          <div class="situation">
            <p><strong>Sit. A:</strong> Lisa sagt, sie <em>______</em> n√§chste Woche nach Italien fliegen.<br>
              <label><input type="radio" name="gram_a" value="wird"> wird</label>
              <label><input type="radio" name="gram_a" value="w√ºrde"> w√ºrde</label>
              <label><input type="radio" name="gram_a" value="kann"> kann</label>
            </p>

            <p><strong>Sit. B:</strong> Beim Einkaufen hat Herr Becker die Milch vergessen; er sagt: ‚ÄûIch muss noch schnell ______ gehen.‚Äú<br>
              <label><input type="radio" name="gram_b" value="zum"> zum Markt</label>
              <label><input type="radio" name="gram_b" value="in"> in das Gesch√§ft</label>
              <label><input type="radio" name="gram_b" value="bei"> bei dem Markt</label>
            </p>

            <p><strong>Sit. C:</strong> Wenn das Wetter morgen sch√∂n ist, ______ wir im Garten arbeiten.<br>
              <label><input type="radio" name="gram_c" value="werden"> werden</label>
              <label><input type="radio" name="gram_c" value="w√ºrden"> w√ºrden</label>
              <label><input type="radio" name="gram_c" value="k√∂nnen"> k√∂nnen</label>
            </p>
          </div>

          <p class="small">Diese Aufgaben erfordern Konzentration: unterschiedliche Zeiten, Modalverben und Pr√§positionen kommen vor.</p>
          <button class="btn" id="gram-save">Antworten speichern (Grammatik)</button>
        </article>
      </section>

      <!-- H√ñREN -->
      <section id="hoeren" class="card">
        <h2>üéß H√∂ren</h2>

        <article class="teil">
          <h3>Teil 1 ‚Äî Supermarkt (H√∂rverst√§ndnis)</h3>
          <p>H√∂ren Sie das Gespr√§ch im Supermarkt und beantworten Sie die Fragen im Textfeld (Antworten werden intern gespeichert).</p>
          <audio controls src="audio/supermarkt.mp3"></audio>

          <ol>
            <li>Was kauft die Frau? (Mehrfachantwort m√∂glich)</li>
            <li>Warum sucht sie das Produkt nicht im Regal?</li>
            <li>Wie viel kostet das Produkt laut dem Verk√§ufer?</li>
          </ol>

          <textarea id="hoeren_supermarkt" rows="3" placeholder="Ihre Antworten hier..."></textarea>
          <button class="btn" id="hoeren_sm_save">Antworten speichern (Supermarkt)</button>
        </article>

        <article class="teil">
          <h3>Teil 2 ‚Äî Bahnhof (H√∂rverst√§ndnis)</h3>
          <p>H√∂ren Sie das Gespr√§ch am Bahnhof (Zug, Gleis, Durchsage). Schreiben Sie Ihre Antworten unten.</p>
          <audio controls src="audio/bahnhof.mp3"></audio>

          <ol>
            <li>Um wieviel Uhr f√§hrt der Zug ab?</li>
            <li>Auf welchem Gleis (Gleisnummer) ist die Abfahrt?</li>
            <li>Gibt es eine Versp√§tung? Wenn ja: wie lange?</li>
          </ol>

          <textarea id="hoeren_bahnhof" rows="3" placeholder="Ihre Antworten hier..."></textarea>
          <button class="btn" id="hoeren_bhf_save">Antworten speichern (Bahnhof)</button>
        </article>

        <article class="teil">
  <h3>Teil 3 ‚Äî Arbeit und Freizeit</h3>
  <p>H√∂ren Sie das Gespr√§ch zwischen Anna und Markus und beantworten Sie die Fragen.</p>
  <audio controls src="audio/arbeit_freizeit.mp3"></audio>

  <ol>
    <li>Warum war Markus gestern lange im B√ºro?</li>
    <li>Was macht Anna, um sich zu entspannen?</li>
    <li>Was hilft Markus, den Kopf frei zu bekommen?</li>
    <li>Was planen die beiden am Ende?</li>
  </ol>

  <textarea id="hoeren_arbeitfreizeit" rows="3" placeholder="Ihre Antworten hier..."></textarea>
  <button class="btn" id="hoeren_af_save">Antworten speichern (Arbeit & Freizeit)</button>
</article>

<!-- <article class="teil">
  <h3>Teil 3 ‚Äî Arbeit und Freizeit (Dialog mit zwei Stimmen)</h3>
  <p>H√∂ren Sie das Gespr√§ch zwischen Anna und Markus √ºber Arbeit und Freizeit.</p>
  <audio controls src="audio/arbeit_freizeit_duo.mp3"></audio>

  <ol>
    <li>Warum war Markus gestern lange im B√ºro?</li>
    <li>Was macht Anna, um sich zu entspannen?</li>
    <li>Was hilft Markus, den Kopf frei zu bekommen?</li>
    <li>Was planen die beiden am Ende?</li>
  </ol>

  <textarea id="hoeren_arbeitfreizeit" rows="3" placeholder="Ihre Antworten hier..."></textarea>
  <button class="btn" id="hoeren_af_save">Antworten speichern (Arbeit & Freizeit)</button>
</article> -->



        <p class="small">Audios: Erzeuge `audio/supermarkt.mp3` und `audio/bahnhof.mp3` mit gTTS (voir scripts fournis pr√©c√©demment).</p>
      </section>

      <!-- SCHREIBEN -->
      <section id="schreiben" class="card">
        <h2>‚úçÔ∏è Schreiben</h2>

        <article class="teil">
          <h3>Aufgabe ‚Äî Brief / E-Mail (ausf√ºhrliche Situation)</h3>
          <p><strong>Situation:</strong> Du arbeitest in einer Firma und dein Team plant ein gro√ües Projekt-Meeting in zwei Wochen. Aus pers√∂nlichen Gr√ºnden (Familienbesuch, wichtige Verpflichtung) kannst du an dem Datum nicht teilnehmen. Schreibe eine formelle E-Mail an deine Projektleiterin, in der du:</p>
          <ul>
            <li>erkl√§rst, warum du nicht teilnehmen kannst (konkret, 2‚Äì3 S√§tze);</li>
            <li>konkrete alternative Termine vorschl√§gst (mindestens zwei M√∂glichkeiten);</li>
            <li>angibst, welche Unterlagen oder Hinweise du vorher zur Verf√ºgung stellen kannst;</li>
            <li>abschlie√üend um Verst√§ndnis bittest und Vorschl√§ge f√ºr eine kurze Teilnahme per Telefon/Video machst.</li>
          </ul>

          <textarea id="schreiben_text" rows="10" placeholder="Schreiben Sie hier Ihre E-Mail (ca. 100‚Äì140 W√∂rter)..."></textarea>
          <button class="btn" id="schreiben-save">Antwort speichern (Schreiben)</button>
          <p class="small">Hinweis: Textl√§nge wird intern gepr√ºft, aber keine Korrektur oder Punktzahl wird angezeigt.</p>
        </article>
      </section>
      <div class="german-keyboard">
  <button data-char="√§">√§</button>
  <button data-char="√∂">√∂</button>
  <button data-char="√º">√º</button>
  <button data-char="√Ñ">√Ñ</button>
  <button data-char="√ñ">√ñ</button>
  <button data-char="√ú">√ú</button>
  <button data-char="√ü">√ü</button>
</div>


      <!-- SUBMIT: enregistre tout sans afficher le r√©sultat -->
      <section class="card">
        <h2>Abgabe</h2>
        <p>Wenn Sie alle Teile bearbeitet haben, dr√ºcken Sie bitte auf <strong>‚ÄûAlle Antworten abschicken‚Äú</strong>. Ihre Antworten werden gespeichert, aber es werden keine Ergebnisse direkt angezeigt.</p>
        <button class="btn" id="submit-all">Alle Antworten abschicken</button>
        <p id="submit-msg" class="small"></p>
        
        <!-- ‚úÖ Bouton de red√©marrage du test -->
        <button class="btn" id="restart-test">üîÅ Neuen Test starten</button>
      </section>
    </main>

    <footer class="site-footer">
      <div class="wrap">
        <p>¬© 2025 Modelltest B1 ‚Äî Erstellt von Chaymae</p>
      </div>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
